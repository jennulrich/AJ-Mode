{% extends 'admin/layout.html.twig' %}

{% block content %}
    <div class="wrapper wrapper-content  animated fadeInRight">
        <div class="row">
            <div class="col-sm-8">
                <div class="ibox">
                    <div class="ibox-content">
                        <div class="input-group">
                            <input type="text" placeholder="Rechercher une boutique" class="input form-control" id="filter">
                            <span class="input-group-btn">
                                        <button type="button" class="btn btn btn-primary"> <i class="fa fa-search"></i> Rechercher</button>
                                </span>
                        </div>
                        <div class="clients-list">
                            <ul class="nav nav-tabs">
                                <!--<span class="pull-right small text-muted">1406 Elements</span>-->
                                <li class="active"><a data-toggle="tab" href="#tab-1"><i class="fa fa-shopping-bag"></i>
                                        Boutiques</a></li>
                            </ul>
                            <div class="tab-content">
                                <div id="tab-1" class="tab-pane active">
                                    <div class="full-height-scroll">
                                        <div class="table-responsive">
                                            <table class="table table-stripped footable" data-filter=#filter>
                                                <tbody>
                                                {% for shop in shops %}
                                                    <tr>
                                                        <td>
                                                            <a data-toggle="tab" href="#contact-{{ shop.id }}"
                                                               class="client-link">{{ shop.shopName }}</a>
                                                        </td>
                                                        <td class="contact-type"><i class="fa fa-map-marker"> </i>
                                                        </td>
                                                        <td> {{ shop.userId.address2 }}</td>
                                                        <td class="client-status"><a href=""
                                                                                     class="btn btn-default btn-xs action delete-alert"
                                                                                     data-toggle="modal"
                                                                                     data-target="#{{ shop.id }}">Supprimer</a>
                                                        </td>
                                                    </tr>
                                                {% endfor %}
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-sm-4">
                <div class="ibox ">
                    <div class="ibox-content">
                        <div class="tab-content">
                            {% for key in shops|keys %}
                                <div id="contact-{{ shops[key].id }}"
                                     class="tab-pane {% if key == 0 %}active{% endif %}">
                                    <div class="row m-b-lg">
                                        <div class="col-lg-12 text-center">
                                            <h2>{{ shops[key].shopName }}</h2>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12">
                                            <strong>
                                                Gérant
                                            </strong>
                                            <p>
                                                {{ shops[key].userId.firstname }} {{ shops[key].userId.lastname }}
                                            </p>
                                            <strong>
                                                Adresse
                                            </strong>
                                            <p>
                                                {{ shops[key].userId.address2 }}
                                            </p>
                                            <strong>
                                                N° de téléphone
                                            </strong>
                                            <p>{{ shops[key].userId.phoneNumber }}</p>
                                            <strong>
                                                Email
                                            </strong>
                                            <p>{{ shops[key].userId.email }}</p>
                                            <a href="{{ path('admin_edit_shop', { 'id': shops[key].id }) }}"
                                               type="button" class="btn btn-primary btn-sm btn-block"><i
                                                        class="fa fa-pencil"></i> Modifier les informations
                                            </a>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        .modal h2 {
            color: #575757;
            /*font-size: 30px;*/
            font-size: 19px;
            text-align: center;
            font-weight: 600;
            text-transform: none;
            position: relative;
            margin: 25px 0;
            padding: 0;
            line-height: 40px;
            display: block;
        }

        .modal-body {
            border-radius: 3px;
        }
    </style>
    <!-- Modal confirmation de suppression -->
    {% for shop in shops %}
        <div class="modal inmodal" id="{{ shop.id }}" tabindex="-1" role="dialog" aria-hidden="true">
            <div class="modal-dialog animated fadeIn">
                <div class="modal-content animated fadeIn">
                    <div class="modal-body">
                        <div class="text-center" style="margin-bottom: 25px;">
                            <i class="fa fa-exclamation-circle animated bounceIn"
                               style="font-size: 30pt; color: orange;"></i>
                            <h2>Êtes-vous sûr de vouloir supprimer cette boutique ?</h2>
                            <span>Cette boutique sera définitivement supprimé de la liste.</span>
                        </div>

                        <div class="text-center">
                            <button type="button" class="btn btn-default" data-dismiss="modal"
                                    style="background-color: #D0D0D0; border: 1px solid #D0D0D0; color: white;">Non
                            </button>
                            <a href="{{ path('admin_delete_shop', { 'id': shop.id}) }}" class="btn btn-primary"
                               data-target="#confirm-delete"
                               style="background-color: #DD6B55; border: 1px solid #DD6B55;">Oui</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
{% endblock %}
